<!DOCTYPE  html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>doc</title>
    <style>
      /*github.com style (c) Vasily Polovnyov <vast@whiteants.net>*/
      pre code {
        display: block; padding: 0.5em;
        color: #333;
        background: #f8f8ff
      }
      pre .comment,
      pre .template_comment,
      pre .diff .header,
      pre .javadoc {
        color: #998;
        font-style: italic
      }
      pre .keyword,
      pre .css .rule .keyword,
      pre .winutils,
      pre .javascript .title,
      pre .nginx .title,
      pre .subst,
      pre .request,
      pre .status {
        color: #333;
        font-weight: bold
      }
      pre .number,
      pre .hexcolor,
      pre .ruby .constant {
        color: #099;
      }
      pre .string,
      pre .tag .value,
      pre .phpdoc,
      pre .tex .formula {
        color: #d14
      }
      pre .title,
      pre .id {
        color: #900;
        font-weight: bold
      }
      pre .javascript .title,
      pre .lisp .title,
      pre .clojure .title,
      pre .subst {
        font-weight: normal
      }
      pre .class .title,
      pre .haskell .type,
      pre .vhdl .literal,
      pre .tex .command {
        color: #458;
        font-weight: bold
      }
      pre .tag,
      pre .tag .title,
      pre .rules .property,
      pre .django .tag .keyword {
        color: #000080;
        font-weight: normal
      }
      pre .attribute,
      pre .variable,
      pre .lisp .body {
        color: #008080
      }
      pre .regexp {
        color: #009926
      }
      pre .class {
        color: #458;
        font-weight: bold
      }
      pre .symbol,
      pre .ruby .symbol .string,
      pre .lisp .keyword,
      pre .tex .special,
      pre .prompt {
        color: #990073
      }
      pre .built_in,
      pre .lisp .title,
      pre .clojure .built_in {
        color: #0086b3
      }
      pre .preprocessor,
      pre .pi,
      pre .doctype,
      pre .shebang,
      pre .cdata {
        color: #999;
        font-weight: bold
      }
      pre .deletion {
        background: #fdd
      }
      pre .addition {
        background: #dfd
      }
      pre .diff .change {
        background: #0086b3
      }
      pre .chunk {
        color: #aaa
      }
    </style>
  </head>
  <body>  
    <h1 id="node-js-database-abstraction-layer-node-dal-">Node.js Database Abstraction Layer (node-dal)</h1>
<p>This is yet another database abstraction layer. </p>
<p>It purpose is to be:</p>
<ol>
<li>simple</li>
<li>elastic and easy to use</li>
<li>pool support with queue</li>
<li>support pagination</li>
<li>well parameterizable</li>
<li>well tested</li>
<li>well documented</li>
<li>easy to extend</li>
</ol>
<p>Supported databases:</p>
<ul>
<li>Oracle (oracledb driver)</li>
</ul>
<p>This library is not:</p>
<ul>
<li>ORM</li>
<li>Promise based</li>
</ul>
<h2 id="documentation">Documentation</h2>
<h3 id="initialization">initialization</h3>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> dalFactory = <span class="hljs-keyword">require</span>(<span class="hljs-string">'bps-lib-dal'</span>),
    oracledb   = <span class="hljs-keyword">require</span>(<span class="hljs-string">'oracledb'</span>), <span class="hljs-comment">// this line is not required but library must be installed in your project!</span>
    conf       = <span class="hljs-keyword">require</span>(<span class="hljs-string">'./config'</span>);

dalFactory(<span class="hljs-string">'oracledb'</span>, conf.oracle, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, dal)</span> </span>{
    <span class="hljs-keyword">if</span>(err) {
        <span class="hljs-keyword">throw</span> err;
    }

    <span class="hljs-comment">/**<span class="hljs-phpdoc"> @typedef</span> {OracleDB} global.dal * /
    global.dal = dal;
});</span>
</code></pre>
<h3 id="sample-config-file">sample config file</h3>
<pre><code class="lang-js">module.exports = {
<span class="hljs-label">    oracle:</span> {
<span class="hljs-label">        connection:</span> {
            <span class="hljs-string">user          :</span> <span class="hljs-string">"dbuser"</span>,
            <span class="hljs-string">password      :</span> <span class="hljs-string">"dbuserpasswd"</span>,
            <span class="hljs-string">connectString :</span> <span class="hljs-string">"localhost/XE"</span>,
            <span class="hljs-string">poolMax       :</span> <span class="hljs-number">10</span>,
            <span class="hljs-string">poolMin       :</span> <span class="hljs-number">1</span>,
            <span class="hljs-string">poolIncrement :</span> <span class="hljs-number">1</span>,
            <span class="hljs-string">poolTimeout   :</span> <span class="hljs-number">60</span>
        },
        <span class="hljs-string">getConnMaxProbes   :</span>  <span class="hljs-number">50</span>, <span class="hljs-comment">// times</span>
        <span class="hljs-string">getConnWaitMinTime :</span> <span class="hljs-number">100</span>, <span class="hljs-comment">// miliseconds</span>
        <span class="hljs-string">getConnWaitMaxTime :</span> <span class="hljs-number">200</span>  <span class="hljs-comment">// miliseconds</span>
    },
<span class="hljs-label">    other:</span> { ... }
};
</code></pre>
<h2 id="api">API</h2>
<p><strong>IMPORTANT!!!</strong></p>
<p>All methods parameters could be pass in two ways:</p>
<ul>
<li>as a object with proper named keys</li>
<li>as a list in proper order</li>
</ul>
<p>for example both below aproach are equivalent:</p>
<pre><code class="lang-js"><span class="hljs-tag">dal</span><span class="hljs-class">.querySql</span>({<span class="hljs-attribute">sql</span>: <span class="hljs-string">'SELECT ...'</span>, <span class="hljs-attribute">bind</span>: [<span class="hljs-number">15</span>], <span class="hljs-attribute">cb</span>: callback});
<span class="hljs-tag">dal</span><span class="hljs-class">.querySql</span>(<span class="hljs-string">'SELECT ...'</span>, [<span class="hljs-number">15</span>], callback);
</code></pre>
<p><a name="API" /></p>
<ul>
<li><a href="#selectOneRow"><code>selectOneRow</code></a></li>
<li><a href="#selectOneRowSql"><code>selectOneRowSql</code></a></li>
<li><a href="#selectOneValue"><code>selectOneValue</code></a></li>
<li><a href="#selectOneValueSql"><code>selectOneValueSql</code></a></li>
<li><a href="#selectClobValueSql"><code>selectClobValueSql</code></a></li>
<li><a href="#selectAllRows"><code>selectAllRows</code></a></li>
<li><a href="#selectAllRowsSql"><code>selectAllRowsSql</code></a></li>
<li><a href="#querySql"><code>querySql</code></a></li>
<li><a href="#runProcedure"><code>runProcedure</code></a></li>
<li><a href="#insert"><code>insert</code></a></li>
<li><a href="#insertReturningId"><code>insertReturningId</code></a></li>
<li><a href="#insertReturningIdSql"><code>insertReturningIdSql</code></a></li>
<li><a href="#update"><code>update</code></a></li>
<li><a href="#del"><code>del</code></a></li>
<li><a href="#executeTransaction"><code>executeTransaction</code></a></li>
<li><a href="#getDbConnection"><code>getDbConnection</code></a></li>
<li><a href="#getDbPool"><code>getDbPool</code></a></li>
<li><a href="#getDriver"><code>getDriver</code></a></li>
</ul>
<hr>
<p><a name="selectOneRow" /></p>
<h4>selectOneRow(<code>tbl:string, [fields:Array|null], where:Array, [opt:object|null], cb:function</code>)</h4>

<p>see params details: <a href="#params-fields"><code>fields</code></a> <a href="#params-where"><code>where</code></a> <a href="#params-opt"><code>opt</code></a></p>
<p>Fetch only one record (row) from table or view.
Request have to return max one record otherwise error will be thrown.</p>
<p>Example:</p>
<pre><code class="lang-js">dal.selectOneRow('test_01', null, ['id = ?', <span class="hljs-number">10</span>], function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }
    cb(null, <span class="hljs-literal">result</span>);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="selectOneRowSql" /></p>
<h4>selectOneRowSql(<code>sql:string, bind:object|Array, [opt:object|null], cb:function</code>)</h4>

<p>see params details: <a href="#params-opt"><code>opt</code></a></p>
<p>Pobiera pojedynczy rekord z tabeli/widoku
(zapytanie SQL musi zwrócić maksymalnie jeden rekord, inaczej będzie błąd)</p>
<pre><code class="lang-js">dal.selectOneRowSql(<span class="hljs-string">"SELECT To_Char(sysdate, 'yyyy-mm-dd') dat FROM dual"</span>, [], function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }
    cb(null, <span class="hljs-literal">result</span>);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="selectOneValue" /></p>
<h4>selectOneValue(<code>tbl:string, field:string, where:Array|object, cb:function</code>)</h4>

<p>see params details: <a href="#params-where"><code>where</code></a></p>
<p>Pobiera pojedynczą wartość z konkretnego pla tabeli/widoku
(zapytanie SQL musi zwrócić maksymalnie jeden rekord, inaczej będzie błąd)</p>
<pre><code class="lang-js">dal.selectOneValue('test_01', 'text',  ['id = ?', <span class="hljs-number">10</span>], function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }
    cb(null, <span class="hljs-literal">result</span>);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="selectOneValueSql" /></p>
<h4>selectOneValueSql(<code>sql:string, bind:object|Array, [opt:object|null], cb:function</code>)</h4>

<p>see params details: <a href="#params-opt"><code>opt</code></a></p>
<p>Pobiera pojedynczą wartość z konkretnego pla tabeli/widoku
(zapytanie SQL musi zwrócić maksymalnie jeden rekord, inaczej będzie błąd)</p>
<pre><code class="lang-js">dal.selectOneValueSql('<span class="hljs-type">SELECT</span> text <span class="hljs-type">FROM</span> test_01 <span class="hljs-type">WHERE</span> id=:<span class="hljs-number">0</span>', [<span class="hljs-number">10</span>], function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }
    cb(null, <span class="hljs-literal">result</span>);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="selectClobValueSql" /></p>
<h4>selectClobValueSql(<code>sql:string, bind:object|Array, [opt:object|null], cb:function</code>)</h4>

<p>see params details: <a href="#params-opt"><code>opt</code></a></p>
<p>Only for Oracle driver.</p>
<pre><code class="lang-js">dal.selectClobValueSql('<span class="hljs-type">SELECT</span> text_clob <span class="hljs-type">FROM</span> test_01 <span class="hljs-type">WHERE</span> id=:<span class="hljs-number">0</span>', [<span class="hljs-number">10</span>], function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }
    cb(null, <span class="hljs-literal">result</span>);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="selectAllRows" /></p>
<h4>selectAllRows(<code>tbl:string, [fields:Array|null], [where:Array|object|null], [order:Array|string|null], [opt:object|null], cb:function</code>)</h4>

<p>see params details: <a href="#params-fields"><code>fields</code></a> <a href="#params-where"><code>where</code></a> <a href="#params-order"><code>order</code></a> <a href="#params-opt"><code>opt</code></a></p>
<pre><code class="lang-js">dal.selectAllRows('test_01', null, null, null, {outFormat: '<span class="hljs-type">array</span>', limit:<span class="hljs-number">10</span>, page:<span class="hljs-number">5</span>}, function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }

    cb(null, <span class="hljs-literal">result</span>);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="selectAllRowsSql" /></p>
<h4>selectAllRowsSql(<code>sql:string, bind:object|Array, [opt:object|null], cb:function</code>)</h4>

<p>see params details: <a href="#params-opt"><code>opt</code></a></p>
<pre><code class="lang-js">dal.selectAllRows(<span class="hljs-string">'SELECT * FROM test WHERE col_a = :0 AND col_b = :1'</span>, [<span class="hljs-number">1</span>, <span class="hljs-string">'T'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, results)</span> </span>{
    <span class="hljs-keyword">if</span>(err) {
        cb(<span class="hljs-keyword">new</span> MyError(err));
        <span class="hljs-keyword">return</span>;
    }

    cb(<span class="hljs-literal">null</span>, results);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="querySql" /></p>
<h4>querySql(<code>sql:string, [bind:object|Array], [opt:object|null], cb:function</code>)</h4>

<p>see params details: <a href="#params-opt"><code>opt</code></a></p>
<p>Wywołanie na bazie poleceń typu: UPDATE, INSERT, DELETE, DROP, ALTER itp...</p>
<pre><code class="lang-js">dal.querySql(<span class="hljs-symbol">'DROP</span> <span class="hljs-type">TABLE</span> test_01', <span class="hljs-literal">[]</span>, <span class="hljs-keyword">done</span>);
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="runProcedure" /></p>
<h4>runProcedure(<code>procName:string, bind:object|Array, cb:function</code>)</h4>

<p>Uruchamia procedurę PL/SQL</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> bindvars = {
    i:  <span class="hljs-symbol">'Chri</span>s',  <span class="hljs-comment">// bind type is determined from the data type</span>
    io: { <span class="hljs-function"><span class="hljs-keyword">val</span>:</span> <span class="hljs-symbol">'Jone</span>s', dir : dal.<span class="hljs-type">BIND_INOUT</span> },
    o:  { <span class="hljs-class"><span class="hljs-keyword">type</span>:</span> dal.<span class="hljs-type">NUMBER</span>, dir : dal.<span class="hljs-type">BIND_OUT</span> },
}
dal.runProcedure(<span class="hljs-symbol">'procedure0</span>1', bindvars, function(err, results) {
    <span class="hljs-keyword">if</span>(err) {
        cb(<span class="hljs-keyword">new</span> <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }

    cb(<span class="hljs-literal">null</span>, results);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="insert" /></p>
<h4>insert(<code>tbl:string, data:object, cb:function</code>)</h4>

<p>see params details: <a href="#params-data"><code>data</code></a></p>
<pre><code class="lang-js">dal.insert('test_01', {id: <span class="hljs-number">999</span>, text: 'simple'}, function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }

    cb(null, results);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="insertReturningId" /></p>
<h4>insertReturningId(<code>tbl:string, data:object, seqence:string, cb:function</code>)</h4>

<p>see params details: <a href="#params-data"><code>data</code></a></p>
<p>Wykonuje polecenie insert pobierając wcześniej ID z sekwencji i zwraca to ID (wersja no SQL)</p>
<pre><code class="lang-js">dal.insertReturningId(<span class="hljs-string">'test_01'</span>, {id: <span class="hljs-literal">null</span>, text: <span class="hljs-string">'test11'</span>}, <span class="hljs-string">'test_01_sid'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, result)</span> </span>{
    <span class="hljs-keyword">if</span>(err) {
        cb(<span class="hljs-keyword">new</span> MyError(err));
        <span class="hljs-keyword">return</span>;
    }

    cb(<span class="hljs-literal">null</span>, results);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="insertReturningIdSql" /></p>
<h4>insertReturningIdSql(<code>sql:string, bind:object|Array, seqence:string, cb:function</code>)</h4>

<p>Wykonuje polecenie insert pobierając wcześniej ID z sekwencji i zwraca to ID (wersja SQL)</p>
<pre><code class="lang-js">dal.insertReturningIdSql(<span class="hljs-string">'INSERT INTO test_01 (id, text) VALUES (:0, :1)'</span>, [<span class="hljs-literal">null</span>,<span class="hljs-string">'test10'</span>], <span class="hljs-string">'test_01_sid'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, result)</span> </span>{
    <span class="hljs-keyword">if</span>(err) {
        cb(<span class="hljs-keyword">new</span> MyError(err));
        <span class="hljs-keyword">return</span>;
    }

    cb(<span class="hljs-literal">null</span>, results);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="update" /></p>
<h4>update(<code>tbl:string, data:object, where:Array|object, cb:function</code>)</h4>

<p>see params details: <a href="#params-where"><code>where</code></a> <a href="#params-data"><code>data</code></a></p>
<p>Wykonuje UPDATE na zadanej tabelce wg zadanych warunków (wersja no SQL)</p>
<pre><code class="lang-js">dal.update('test_01', {text: 'test11-modified'}, ['id = ?', <span class="hljs-number">11</span>], function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }

    cb(null, results);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="del" /></p>
<h4>del(<code>tbl:string, where:Array|object, cb:function</code>)</h4>

<p>see params details: <a href="#params-where"><code>where</code></a></p>
<p>Usunięcie rekordu/rekordów</p>
<pre><code class="lang-js">dal.del('test_01', ['id = ?', <span class="hljs-number">999</span>], function(err, <span class="hljs-literal">result</span>) {
    <span class="hljs-keyword">if</span>(err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }

    cb(null, results);
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="executeTransaction" /></p>
<h4>executeTransaction(<code>sqlBindArray:Array, cb:function</code>)</h4>

<pre><code class="lang-js">var sqlBindArray = [
    ['<span class="hljs-operator"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_01 <span class="hljs-keyword">VALUES</span> (:<span class="hljs-number">0</span>, :<span class="hljs-number">1</span>)<span class="hljs-string">', [131, '</span>T01<span class="hljs-string">']],
    ['</span><span class="hljs-keyword">UPDATE</span> test_01 <span class="hljs-keyword">SET</span> <span class="hljs-built_in">text</span> = :<span class="hljs-number">0</span> <span class="hljs-keyword">WHERE</span> id = :<span class="hljs-number">1</span><span class="hljs-string">', ['</span>T02<span class="hljs-string">', 131]],
    ['</span><span class="hljs-keyword">UPDATE</span> test_01 <span class="hljs-keyword">SET</span> <span class="hljs-built_in">text</span> = :<span class="hljs-number">0</span> <span class="hljs-keyword">WHERE</span> id = :<span class="hljs-number">1</span><span class="hljs-string">', ['</span>AAB<span class="hljs-string">', 124]],
    ['</span><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> test_01 <span class="hljs-keyword">WHERE</span> id = :<span class="hljs-number">0</span><span class="hljs-string">', [131]]
];

dal.executeTransaction(sqlBindArray, function(err, results) {
    if(err) {
        done(err);
        return;
    }

    assert.equal(results.length, 4);
    done();
});</span></span>
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="getDbConnection" /></p>
<h4>getDbConnection(<code>cb:function, [probes:number], [waitTime:number]</code>)</h4>

<pre><code class="lang-js">dal.getDbConnection(function(err, connection){
    <span class="hljs-keyword">if</span> (err) {
        cb(new <span class="hljs-type">MyError</span>(err));
        <span class="hljs-keyword">return</span>;
    }

    connection.execute(sql, <span class="hljs-keyword">bind</span>, {outFormat: dal.<span class="hljs-type">OBJECT</span>}, function(err, <span class="hljs-literal">result</span>) {
        <span class="hljs-keyword">if</span> (err) {
            cb(new <span class="hljs-type">MyError</span>(err, {sql: sql, <span class="hljs-keyword">bind</span>: <span class="hljs-keyword">bind</span>}));
            <span class="hljs-keyword">return</span>;
        }

        /* <span class="hljs-type">Release</span> the connection back to the connection pool */
        connection.release(function(err) {
            <span class="hljs-keyword">if</span> (err) {
                cb(new <span class="hljs-type">MyError</span>(err));
                <span class="hljs-keyword">return</span>;
            }

            cb(null, <span class="hljs-literal">result</span>);
        });
    });
});
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="getDbPool" /></p>
<h4>getDbPool()</h4>

<p>Get orgin connection pool (one from driver or generic pool if driver hasn&#39;t pool&#39;).</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> dbPool = dal.getDbPool();
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="getDriver" /></p>
<h4>getDriver()</h4>

<p>Get raw db driver object.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> driver = dal.getDriver();
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<h2 id="method-parameters">Method parameters</h2>
<hr>
<p><a name="params-fields" /></p>
<h4>fields</h4>

<p>selected fields:</p>
<pre><code class="lang-js">[&#39;field1&#39;, &#39;field2&#39;, &#39;field3&#39;]
</code></pre>
<p>all fields:</p>
<pre><code class="lang-js"><span class="hljs-literal">null</span>
</code></pre>
<p>only one field:</p>
<pre><code class="lang-js"><span class="hljs-string">'fieldX'</span>
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="params-where" /></p>
<h4>where</h4>

<p>as a array:</p>
<pre><code class="lang-js">[
   [<span class="hljs-symbol">'field</span> <span class="hljs-type">LIKE</span> ?', '%ola%'], <span class="hljs-comment">// operator AND is default</span>
   [<span class="hljs-symbol">'field2</span> <span class="hljs-type">IS</span> <span class="hljs-type">NULL</span>', <span class="hljs-literal">null</span>, <span class="hljs-symbol">'O</span>R'],
   {
       <span class="hljs-class"><span class="hljs-keyword">type</span>:</span> <span class="hljs-symbol">'AN</span>D',
       nested: [
           [<span class="hljs-symbol">'field3</span> = ?', <span class="hljs-number">5</span>],
           [<span class="hljs-symbol">'field5</span> <span class="hljs-type">BETWEEN</span> ? <span class="hljs-type">AND</span> ?, [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>], <span class="hljs-symbol">'O</span>R']
       ] <span class="hljs-comment">// nested in "AND ()"</span>
   }
]
</code></pre>
<p>as a object (only AND clouse and equity (=) operator):</p>
<pre><code class="lang-js">{ 
    <span class="hljs-attribute">field1</span>: <span class="hljs-number">100</span>, 
    <span class="hljs-attribute">field2</span>: <span class="hljs-string">'abc'</span> 
}
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="params-data" /></p>
<h4>data</h4>

<pre><code class="lang-js">var data = {
<span class="hljs-label">    field1:</span> {<span class="hljs-string">type:</span> <span class="hljs-string">'sequence'</span>, <span class="hljs-string">name:</span> <span class="hljs-string">'seq_name'</span>},
<span class="hljs-label">    field2:</span> <span class="hljs-string">"value1"</span>,
<span class="hljs-label">    field3:</span> {<span class="hljs-string">type:</span> <span class="hljs-string">'function'</span>, <span class="hljs-string">name:</span> <span class="hljs-string">'fn_name'</span>},
<span class="hljs-label">    field4:</span> <span class="hljs-string">"value2"</span>,
<span class="hljs-label">    field5:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'SYSDATE'</span>}
}
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<hr>
<p><a name="params-order" /></p>
<h4>order</h4>

<pre><code class="lang-js"><span class="hljs-tag">var</span> order_v1 = [<span class="hljs-string">'field1'</span>, [<span class="hljs-string">'field2'</span>, <span class="hljs-string">'DESC'</span>]]
<span class="hljs-tag">var</span> order_v2 = [<span class="hljs-string">'field1'</span>, <span class="hljs-string">'field2 DESC'</span>]
</code></pre>
<p><a href="#API"><code>API</code></a></p>
<p><a name="params-opt" /></p>
<h4>opt</h4>


<pre><code class="lang-js"><span class="hljs-keyword">var</span> opt = {
    outFormat: <span class="hljs-string">'array'</span>, <span class="hljs-comment">// wyniki są zwracane w tablicy zamiast jako obiekt z kluczami zgodnymi z nazwą pól</span>
    limit: <span class="hljs-number">10</span>,          <span class="hljs-comment">// aktywuje stronicowanie i określa rozmiar strony, dodaje też do wyników pole n__ (lub ostatnie w tablicy) z numerem wiersza</span>
    page: <span class="hljs-number">5</span>             <span class="hljs-comment">// numer strony,</span>
    totalCount: <span class="hljs-literal">true</span>    <span class="hljs-comment">// dodaje do wyników pole c__ (lub przed ostatnie w tablicy) z sumą rekordów zapytania</span>
}
</code></pre>
<p><a href="#API"><code>API</code></a></p>

  </body>
</html>
